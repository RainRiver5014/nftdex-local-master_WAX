(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{GzsY:function(e,t,a){"use strict";a.r(t);var n=a("jehZ"),o=a.n(n),r=a("p0pE"),i=a.n(r),l=a("2Taf"),c=a.n(l),s=a("vZ4D"),d=a.n(s),u=a("l4Ni"),m=a.n(u),h=a("ujKo"),p=a.n(h),g=a("MhPg"),f=a.n(g),v=(a("B9cy"),a("Ol7k")),y=a("q1tI"),b=a.n(y),x=a("ZFw/"),N=a.n(x),E=a("Y+p1"),M=a.n(E),k=a("Wwog"),w=a("MuoO"),C=a("E6Dt"),P=a("TSYQ"),S=a.n(P),W=a("bALw"),D=a.n(W),H=a("lU33"),T=a("LLXN"),j=(a("HZnN"),a("zwU1")),O=a.n(j),F=a("gJ0l"),L=(a("miYZ"),a("tsqr")),I=(a("7DNP"),a("MFj2")),A=a("usdK"),U=(a("NtFa"),a("mOP9")),z=(a("lUTK"),a("BvKs")),q=(a("Pwec"),a("CtXQ")),K=(a("+BJd"),a("mr32")),Q=a("qIgq"),X=a.n(Q),R=a("wd/R"),Z=a.n(R),J=a("bt/X"),V=a.n(J),Y=(a("8TWP"),a("k5GS"),a("+jAw"),a("bfXr"),a("h3zL")),B=a.n(Y),G=function(e){function t(){var e,a;c()(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return a=m()(this,(e=p()(t)).call.apply(e,[this].concat(o))),a.getUnreadData=function(e){var t={};return Object.entries(e).forEach(function(e){var a=X()(e,2),n=a[0],o=a[1];t[n]||(t[n]=0),Array.isArray(o)&&(t[n]=o.filter(function(e){return!e.read}).length)}),t},a.changeReadState=function(e){var t=e.id,n=a.props.dispatch;n({type:"global/changeNoticeReadState",payload:t})},a.fetchMoreNotices=function(e){var t=e.list,n=e.name,o=a.props,r=o.dispatch,i=o.notices,l=void 0===i?[]:i,c=l[l.length-1].id;r({type:"global/fetchMoreNotices",payload:{lastItemId:c,type:n,offset:t.length}})},a}return f()(t,e),d()(t,[{key:"getNoticeData",value:function(){var e=this.props.notices,t=void 0===e?[]:e;if(0===t.length)return{};var a=t.map(function(e){var t=i()({},e);if(t.datetime&&(t.datetime=Z()(e.datetime).fromNow()),t.id&&(t.key=t.id),t.extra&&t.status){var a={todo:"",processing:"blue",urgent:"red",doing:"gold"}[t.status];t.extra=b.a.createElement(K["a"],{color:a,style:{marginRight:0}},t.extra)}return t});return V()(a,"type")}},{key:"render",value:function(){var e=this.props,t=e.currentUser,a=(e.fetchingMoreNotices,e.fetchingNotices,e.loadedAllNotices,e.onNoticeVisibleChange,e.onMenuClick),n=(e.onNoticeClear,e.skeletonCount,e.theme);console.log(t);b.a.createElement(z["a"],{className:B.a.menu,selectedKeys:[],onClick:a},void 0!==t.email?b.a.createElement(z["a"].Item,{key:"logout"},b.a.createElement(q["a"],{type:"logout"}),b.a.createElement(T["FormattedMessage"],{id:"menu.account.logout",defaultMessage:"logout"})):b.a.createElement(z["a"].Item,{key:"login"},b.a.createElement(q["a"],{type:"login"}),b.a.createElement(T["FormattedMessage"],{id:"menu.account.login",defaultMessage:"login"})));var o=this.getNoticeData(),r=(this.getUnreadData(o),B.a.right);return"dark"===n&&(r="".concat(B.a.right,"  ").concat(B.a.dark)),b.a.createElement("div",{className:r})}}]),t}(y["PureComponent"]),$=a("oFg3"),_=a("pMM0"),ee=a("nFQX"),te=a.n(ee),ae=a("T+dw"),ne=function(e){function t(){var e,a;c()(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return a=m()(this,(e=p()(t)).call.apply(e,[this].concat(o))),a.state={maxWidth:void 0},a}return f()(t,e),d()(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.theme,n=(t.contentWidth,t.menuData),r=t.logo,i=this.state.maxWidth,l=Object(_["b"])(n);return b.a.createElement("div",{className:"".concat(te.a.head," ").concat("light"===a?te.a.light:""),style:{}},b.a.createElement("div",{ref:function(t){e.maim=t},className:"".concat(te.a.main," ").concat(te.a.wide)},b.a.createElement("div",{className:te.a.center},b.a.createElement("div",{className:te.a.logo,key:"logo",id:"logo"},b.a.createElement(U["a"],{to:"/"},b.a.createElement("img",{src:r,alt:"logo"}))),b.a.createElement("div",{style:{maxWidth:i}},b.a.createElement($["default"],o()({},this.props,{flatMenuKeys:l,className:te.a.menu})))),b.a.createElement(G,this.props)))}}],[{key:"getDerivedStateFromProps",value:function(e){return{maxWidth:("Fixed"===e.contentWidth?1200:window.innerWidth)-280-165-40}}}]),t}(y["PureComponent"]),oe=a("wSsI"),re=a.n(oe),ie=v["a"].Header,le=function(e){function t(){var e,a;c()(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return a=m()(this,(e=p()(t)).call.apply(e,[this].concat(o))),a.state={visible:!0},a.getHeadWidth=function(){var e=a.props,t=e.isMobile,n=e.collapsed,o=e.setting,r=o.fixedHeader,i=o.layout;return t||!r||"topmenu"===i?"100%":n?"calc(100% - 80px)":"calc(100% - 256px)"},a.handleNoticeClear=function(e){L["a"].success("".concat(Object(T["formatMessage"])({id:"component.noticeIcon.cleared"})," ").concat(Object(T["formatMessage"])({id:"component.globalHeader.".concat(e)})));var t=a.props.dispatch;t({type:"global/clearNotices",payload:e})},a.handleMenuClick=function(e){var t=e.key,n=a.props.dispatch;if("userCenter"!==t)if("triggerError"!==t){if("userinfo"!==t)return"logout"===t&&(n({type:"login/logout"}),window.location.reload()),"login"===t?(console.log("clicked"),void A["a"].push("/user/login")):void 0;A["a"].push("/account/settings/base")}else A["a"].push("/exception/trigger");else A["a"].push("/account/center")},a.handleNoticeVisibleChange=function(e){if(e){var t=a.props.dispatch;t({type:"global/fetchNotices"})}},a.handScroll=function(){var e=a.props.autoHideHeader,t=a.state.visible;if(e){var n=document.body.scrollTop+document.documentElement.scrollTop;a.ticking||(a.ticking=!0,requestAnimationFrame(function(){a.oldScrollTop>n?a.setState({visible:!0}):n>300&&t?a.setState({visible:!1}):n<300&&!t&&a.setState({visible:!0}),a.oldScrollTop=n,a.ticking=!1}))}},a}return f()(t,e),d()(t,[{key:"componentDidMount",value:function(){document.addEventListener("scroll",this.handScroll,{passive:!0})}},{key:"componentWillUnmount",value:function(){document.removeEventListener("scroll",this.handScroll)}},{key:"render",value:function(){var e=this.props,t=(e.isMobile,e.handleMenuCollapse),a=e.setting,n=a.navTheme,r=(a.layout,a.fixedHeader,this.state.visible),i=this.getHeadWidth(),l=r?b.a.createElement(ie,{style:{padding:0,width:i,height:80},className:re.a.fixedHeader},b.a.createElement(ne,o()({theme:n,mode:"horizontal",onCollapse:t,onNoticeClear:this.handleNoticeClear,onMenuClick:this.handleMenuClick,onNoticeVisibleChange:this.handleNoticeVisibleChange},this.props))):null;return b.a.createElement(I["a"],{component:"",transitionName:"fade"},l)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.autoHideHeader||t.visible?null:{visible:!0}}}]),t}(y["Component"]),ce=Object(w["connect"])(function(e){var t=e.user,a=e.global,n=e.setting,o=e.loading;return{currentUser:t.currentUser,collapsed:a.collapsed,fetchingMoreNotices:o.effects["global/fetchMoreNotices"],fetchingNotices:o.effects["global/fetchNotices"],loadedAllNotices:a.loadedAllNotices,notices:a.notices,setting:n}})(le),se=a("R1Dz"),de=(a("wOmh"),a("xqX8")),ue=(a("IamK"),a("QLIz")),me=a.n(ue),he=(b.a.lazy(function(){return Promise.all([a.e(0),a.e(1)]).then(a.bind(null,"PceP"))}),v["a"].Content),pe={"screen-xs":{maxWidth:575},"screen-sm":{minWidth:576,maxWidth:767},"screen-md":{minWidth:768,maxWidth:991},"screen-lg":{minWidth:992,maxWidth:1199},"screen-xl":{minWidth:1200,maxWidth:1599},"screen-xxl":{minWidth:1600}},ge=function(e){function t(e){var a;return c()(this,t),a=m()(this,p()(t).call(this,e)),a.matchParamsPath=function(e,t){var a=Object.keys(t).find(function(t){return D()(t).test(e)});return t[a]},a.getPageTitle=function(e,t){var n=a.matchParamsPath(e,t);if(!n)return ae["title"];var o=ae["menu"].disableLocal?n.name:Object(T["formatMessage"])({id:n.locale||n.name,defaultMessage:n.name});return"".concat(o," - ").concat(ae["title"])},a.getLayoutStyle=function(){var e=a.props,t=e.fixSiderbar,n=e.isMobile,o=e.collapsed,r=e.layout;return t&&"topmenu"!==r&&!n?{paddingLeft:o?"80px":"256px"}:null},a.handleMenuCollapse=function(e){var t=a.props.dispatch;t({type:"global/changeLayoutCollapsed",payload:e})},a.renderSettingDrawer=function(){return null},a.getPageTitle=Object(k["a"])(a.getPageTitle),a.matchParamsPath=Object(k["a"])(a.matchParamsPath,M.a),a}return f()(t,e),d()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatch,a=e.route,n=a.routes,o=a.authority;t({type:"setting/getSetting"}),t({type:"menu/getMenuData",payload:{routes:n,authority:o}})}},{key:"getContext",value:function(){var e=this.props,t=e.location,a=e.breadcrumbNameMap;return{location:t,breadcrumbNameMap:a}}},{key:"render",value:function(){var e=this,t=this.props,a=(t.navTheme,t.layout,t.children),n=t.location.pathname,r=t.isMobile,l=t.menuData,c=t.breadcrumbNameMap,s=(t.route.routes,t.fixedHeader,{}),d=b.a.createElement(v["a"],null,b.a.createElement(v["a"],{style:i()({},this.getLayoutStyle(),{minHeight:"100vh"})},b.a.createElement(ce,o()({menuData:l,handleMenuCollapse:this.handleMenuCollapse,logo:O.a,isMobile:r},this.props)),b.a.createElement(he,{className:me.a.content,style:s},a),b.a.createElement(F["a"],null)));return b.a.createElement(b.a.Fragment,null,b.a.createElement(N.a,{title:this.getPageTitle(n,c)},b.a.createElement(C["ContainerQuery"],{query:pe},function(t){return b.a.createElement(se["a"].Provider,{value:e.getContext()},b.a.createElement("div",{className:S()(t)},d))})),b.a.createElement(y["Suspense"],{fallback:b.a.createElement(de["default"],null)},this.renderSettingDrawer()))}}]),t}(b.a.Component);t["default"]=Object(w["connect"])(function(e){var t=e.global,a=e.setting,n=e.menu;return i()({collapsed:t.collapsed,layout:a.layout,menuData:n.menuData,breadcrumbNameMap:n.breadcrumbNameMap},a)})(function(e){return b.a.createElement(H["a"],{query:"(max-width: 599px)"},function(t){return b.a.createElement(ge,o()({},e,{isMobile:t}))})})},QLIz:function(e,t,a){e.exports={content:"antd-pro-layouts-home-layout-content"}},nFQX:function(e,t,a){e.exports={head:"antd-pro-components-top-nav-header-home-index-head",light:"antd-pro-components-top-nav-header-home-index-light",main:"antd-pro-components-top-nav-header-home-index-main",wide:"antd-pro-components-top-nav-header-home-index-wide",left:"antd-pro-components-top-nav-header-home-index-left",center:"antd-pro-components-top-nav-header-home-index-center",right:"antd-pro-components-top-nav-header-home-index-right",logo:"antd-pro-components-top-nav-header-home-index-logo",menu:"antd-pro-components-top-nav-header-home-index-menu"}},wSsI:function(e,t,a){e.exports={fixedHeader:"antd-pro-layouts-header-home-fixedHeader"}},zwU1:function(e,t,a){e.exports=a.p+"static/logo.2dfe5cbf.png"}}]);